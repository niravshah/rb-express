var vCookieRibbon=new Vue({el:"#cookie-ribbon",data:{},computed:{},created:function(){$.cookie("rb-cookie-home")&&$("#cookie-ribbon").hide()},methods:{close:function(){$("#cookie-ribbon").hide(),$.cookie("rb-cookie-home","rb-cookie-home")}}}),editAuthorVue=new Vue({el:"#editAuthorVue",data:{messages:[],author:{fname:"",lname:"",bio:"",avatar:""},postSid:$("meta[name='post-sid']").attr("content"),authorSid:$("meta[name='author-sid']").attr("content"),url:""},created:function(){$(".loader").fadeOut(400),console.log(this.postSid,this.authorSid),this.$http.get("/api/posts/"+this.postSid).then(function(e){console.log("Post",e.body),this.author=e.body.author},function(e){console.log("Error",e)})},computed:{},methods:{previewImage:function(e){var t=this;if(e.target.files&&e.target.files[0]){var s=new FileReader;s.onload=function(e){this.target=e.target,t.url=this.target.result},s.readAsDataURL(e.target.files[0])}},closeBtn:function(e){console.log("Close Button Clicked!",e)}}}),vFirstLogin=new Vue({el:"#login",data:{messages:[],username:"",password:"",code:""},computed:{isValid:function(){return!this.errors.any()&&""!=this.username&&""!=this.password&&""!=this.code}},methods:{onSubmit:function(){if(!this.errors.any()){var e={username:this.username,password:this.password,mobileCode:this.code};this.$http.post("/api/auth/first-login",e).then(function(e){var t=e.body.token;if(t){var s=e.body.email;localStorage.setItem("token",t),localStorage.setItem("currentUser",JSON.stringify({email:s,username:this.username,token:t,sid:e.body.sid})),document.location.href="/reset-password"}else this.messages.push({type:"error",message:"Username, password or code incorrect"})},function(e){404==e.status?this.messages.push({type:"error",message:"Page Not Found: "+e.url}):this.messages.push({type:"error",message:e.message})})}}}}),vFundraiser=new Vue({el:"#funraiserController",data:{messages:[]},created:function(){$(".loader").fadeOut(400)},computed:{},methods:{scrollTop:function(){$("html, body").animate({scrollTop:200},700)},isAuthorLogin:function(){return!!Vue.isLoggedIn()&&$("meta[name='author-sid']").attr("content")==Vue.loggedInUserSid()}},filters:{percentcalc:function(e,t){return 0!==e&&0!==t?Math.round(e/t*100):0}}}),vHeader=new Vue({el:"header",data:{loggedIn:!1},created:function(){this.loggedIn=Vue.tokenValid()},methods:{openContactModal:function(){var e=document.querySelector("#contact-modal"),t=document.querySelector("#modal-overlay");e.classList.toggle("closed"),t.classList.toggle("closed")},logout:function(){localStorage.removeItem("currentUser"),localStorage.removeItem("token"),document.location.href="/"}}}),vContactModal=new Vue({el:"#contactModalContainer",data:{loggedIn:!1,messages:[],fname:"",lname:"",email:"",query:"",mobile:""},created:function(){this.loggedIn=Vue.tokenValid()},methods:{close:function(){var e=document.querySelector("#contact-modal"),t=document.querySelector("#modal-overlay");e.classList.toggle("closed"),t.classList.toggle("closed")}}}),vHome=new Vue({el:"#home",data:{},created:function(){$(".loader").fadeOut(400)}}),vSignupForm=new Vue({el:"#signupForm",data:{amount:"",title:"",fname:"",lname:"",email:"",mobile:""},created:function(){$(".loader").fadeOut(400)},computed:{isValid:function(){return!this.errors.any()&&""!=this.amount&&""!=this.fname&&""!=this.lname&&""!=this.title&&""!=this.email&&""!=this.mobile}},methods:{onSubmit:function(){this.errors.any()||this.$http.post("/api/posts",this.$data).then(function(e){document.location.href="/first-login"},function(e){document.location.href="/info?message="+e.body.message})}}}),vInfo=new Vue({el:"#info",data:{messages:[]},computed:{},methods:{}}),vListing=new Vue({el:"#property",data:{posts:[]},created:function(){var e={Authorization:"JWT "+localStorage.getItem("token")};this.$http.get("/api/user/posts",{headers:e}).then(function(e){this.posts=e.body},function(e){404==e.status?this.messages.push({type:"error",message:"Page Not Found: "+e.url}):this.messages.push({type:"error",message:e.body.message})})},filters:{currency:function(e,t){return"GBP"==t?"Â£"+e:t+e},titlecase:function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}},computed:{},methods:{}});Vue.directive("timeleft",function(e,t){e.style.backgroundColor="yellow";var s=(new Date).getTime()-Date.parse(t.value.date),o=Math.ceil(30-s/864e5);o<0&&(o=0),e.innerText=o+" days left"});var vLogin=new Vue({el:"#login",data:{messages:[],username:"",password:""},computed:{isValid:function(){return!this.errors.any()&&""!=this.username&&""!=this.password}},methods:{onSubmit:function(){if(!this.errors.any()){var e={username:this.username,password:this.password};this.$http.post("/api/auth/login",e).then(function(e){var t=e.body.token;if(t){var s=e.email;localStorage.setItem("token",t),localStorage.setItem("currentUser",JSON.stringify({email:s,username:this.username,token:t,sid:e.body.sid})),document.location.href="/home"}else this.messages.push({type:"error",message:"Username or password incorrect"})},function(e){404==e.status?this.messages.push({type:"error",message:"Page Not Found: "+e.url}):this.messages.push({type:"error",message:e.body.message})})}}}}),vResetPassword=new Vue({el:"#login",data:{messages:[],password:"",repeatPassword:""},computed:{isValid:function(){return!this.errors.any()&&""!=this.password&&""!=this.repeatPassword}},methods:{onSubmit:function(){if(!this.errors.any()){var e={Authorization:"JWT "+localStorage.getItem("token")},t={password:this.password,repeatPassword:this.repeatPassword};this.$http.post("/api/auth/reset-password",t,{headers:e}).then(function(e){console.log(e);var t=e.body.token;t?(localStorage.setItem("token",t),document.location.href="/home"):this.messages.push({type:"error",message:"Username, password or code incorrect"})},function(e){404==e.status?this.messages.push({type:"error",message:"Page Not Found: "+e.url}):this.messages.push({type:"error",message:e.body.message})})}}}}),vSignup=new Vue({el:"#login",data:{messages:[],amount:"",title:"",lname:"",fname:"",email:"",mobile:""},computed:{isValid:function(){return!this.errors.any()&&""!=this.amount&&""!=this.title&&""!=this.lname&&""!=this.fname&&""!=this.email&&""!=this.mobile}},methods:{onSubmit:function(){if(!this.errors.any()){this.$http.post("/api/posts",this.$data).then(function(e){document.location.href="/first-login"},function(e){404==e.status?this.messages.push({type:"error",message:"Page Not Found: "+e.url}):this.messages.push({type:"error",message:e.message})})}}}});